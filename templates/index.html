<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nosso Enxoval - Planejamento de Casamento</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='static/upload/images/icon/fav.png') }}"
    />
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1><i class="fas fa-heart"></i> Nosso Enxoval</h1>
          <div class="header-actions">
            <button id="new-project-btn" class="btn btn-primary">
              <i class="fas fa-plus"></i> Novo Projeto
            </button>
            <button id="save-project-btn" class="btn btn-success">
              <i class="fas fa-save"></i> Salvar
            </button>
            <button id="load-project-btn" class="btn btn-info">
              <i class="fas fa-folder-open"></i> Carregar
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
          <div class="sidebar-section">
            <h3><i class="fas fa-home"></i> C√¥modos</h3>
            <button id="add-room-btn" class="btn btn-outline">
              <i class="fas fa-plus"></i> Adicionar C√¥modo
            </button>
            <div id="rooms-list" class="rooms-list"></div>
          </div>

          <div class="sidebar-section">
            <h3><i class="fas fa-couch"></i> Itens</h3>
            <button id="add-item-btn" class="btn btn-outline">
              <i class="fas fa-plus"></i> Adicionar Item
            </button>
            <div class="filter-section">
              <select id="category-filter">
                <option value="">Todas as categorias</option>
                <option value="moveis">M√≥veis</option>
                <option value="eletrodomesticos">Eletrodom√©sticos</option>
                <option value="utensilios">Utens√≠lios</option>
                <option value="decoracao">Decora√ß√£o</option>
                <option value="outros">Outros</option>
              </select>
              <select id="room-filter">
                <option value="">Todos os c√¥modos</option>
              </select>
              <select id="priority-filter">
                <option value="">Todas as prioridades</option>
                <option value="basico">B√°sico</option>
                <option value="necessario">Necess√°rio</option>
                <option value="util">√ötil</option>
                <option value="luxo">Luxo</option>
              </select>
              <select id="status-filter">
                <option value="">Todos os status</option>
                <option value="comprado">Comprado</option>
                <option value="pendente">Pendente</option>
              </select>
            </div>
            <div id="items-list" class="items-list"></div>
          </div>
        </aside>

        <!-- Main View -->
        <section class="main-view">
          <div class="view-controls">
            <button id="floor-plan-view" class="btn btn-outline active">
              <i class="fas fa-map"></i> Planta Baixa
            </button>
            <button id="list-view" class="btn btn-outline">
              <i class="fas fa-list"></i> Lista
            </button>
            <button id="accounts-view" class="btn btn-outline">
              <i class="fas fa-calculator"></i> Contas
            </button>
          </div>

          <div id="floor-plan-container" class="floor-plan-container">
            <div id="floor-plan" class="floor-plan">
              <div class="empty-state">
                <i class="fas fa-home"></i>
                <h3>Comece criando um c√¥modo</h3>
                <p>Adicione c√¥modos para come√ßar a planejar seu enxoval</p>
              </div>
            </div>
          </div>

          <div id="list-container" class="list-container" style="display: none">
            <div id="items-grid" class="items-grid"></div>
          </div>

          <div
            id="accounts-container"
            class="accounts-container"
            style="display: none"
          >
            <div class="accounts-summary">
              <h2>Resumo Financeiro</h2>
              <div class="summary-cards">
                <div class="summary-card total">
                  <h3>Total Geral</h3>
                  <div class="amount" id="total-amount">R$ 0,00</div>
                </div>
                <div class="summary-card purchased">
                  <h3>J√° Comprado</h3>
                  <div class="amount" id="purchased-amount">R$ 0,00</div>
                </div>
                <div class="summary-card pending">
                  <h3>Pendente</h3>
                  <div class="amount" id="pending-amount">R$ 0,00</div>
                </div>
              </div>
            </div>

            <div class="accounts-by-room">
              <h3>Por C√¥modo</h3>
              <div id="room-accounts" class="room-accounts"></div>
            </div>

            <div class="accounts-by-priority">
              <h3>Por Prioridade</h3>
              <div id="priority-accounts" class="priority-accounts"></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Modals -->
    <!-- Modal de C√¥modo -->
    <div id="room-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="room-modal-title">Adicionar C√¥modo</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <form id="room-form">
            <div class="form-group">
              <label for="room-name">Nome do C√¥modo</label>
              <input type="text" id="room-name" required />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="room-width">Largura (m)</label>
                <input
                  type="number"
                  id="room-width"
                  min="1"
                  max="20"
                  step="0.1"
                  required
                />
              </div>
              <div class="form-group">
                <label for="room-height">Altura (m)</label>
                <input
                  type="number"
                  id="room-height"
                  min="1"
                  max="20"
                  step="0.1"
                  required
                />
              </div>
            </div>
            <div class="form-group">
              <label for="room-color">Cor do C√¥modo</label>
              <input type="color" id="room-color" value="#e3f2fd" />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-room">
            Cancelar
          </button>
          <button type="submit" form="room-form" class="btn btn-primary">
            Salvar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Item -->
    <div id="item-modal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3 id="item-modal-title">Adicionar Item</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <form id="item-form">
            <div class="form-group">
              <label for="item-name">Nome do Item</label>
              <input type="text" id="item-name" required />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="item-category">Categoria</label>
                <select id="item-category" required>
                  <option value="">Selecione...</option>
                  <option value="moveis">M√≥veis</option>
                  <option value="eletrodomesticos">Eletrodom√©sticos</option>
                  <option value="utensilios">Utens√≠lios</option>
                  <option value="decoracao">Decora√ß√£o</option>
                  <option value="outros">Outros</option>
                </select>
              </div>
              <div class="form-group">
                <label for="item-room">C√¥modo</label>
                <select id="item-room" required>
                  <option value="">Selecione...</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="item-priority">Prioridade</label>
                <select id="item-priority" required>
                  <option value="">Selecione...</option>
                  <option value="basico">üî¥ B√°sico</option>
                  <option value="necessario">üü° Necess√°rio</option>
                  <option value="util">üü¢ √ötil</option>
                  <option value="luxo">üîµ Luxo</option>
                </select>
              </div>
              <div class="form-group">
                <label for="item-status">Status</label>
                <select id="item-status" required>
                  <option value="pendente">‚è≥ Pendente</option>
                  <option value="comprado">‚úÖ Comprado</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="item-width">Largura (cm)</label>
                <input type="number" id="item-width" min="1" max="1000" />
              </div>
              <div class="form-group">
                <label for="item-height">Altura (cm)</label>
                <input type="number" id="item-height" min="1" max="1000" />
              </div>
            </div>

            <div class="form-group">
              <label for="item-price">Pre√ßo (R$)</label>
              <input type="number" id="item-price" min="0" step="0.01" />
            </div>

            <div class="form-group">
              <label for="item-icon">√çcone</label>
              <div class="icon-selector">
                <button type="button" id="selected-icon" class="icon-button">
                  <i class="fas fa-cube"></i>
                </button>
                <button
                  type="button"
                  id="choose-icon-btn"
                  class="btn btn-outline"
                >
                  Escolher √çcone
                </button>
              </div>
              <input type="hidden" id="item-icon" value="fas fa-cube" />
            </div>

            <div class="form-group">
              <label>Links de Compra</label>
              <div id="purchase-links" class="purchase-links">
                <div class="link-group">
                  <input
                    type="url"
                    placeholder="https://..."
                    class="purchase-link-input"
                  />
                  <input
                    type="text"
                    placeholder="Nome da loja (opcional)"
                    class="store-name-input"
                  />
                  <button type="button" class="btn btn-danger remove-link">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
              <button type="button" id="add-link-btn" class="btn btn-outline">
                <i class="fas fa-plus"></i> Adicionar Link
              </button>
            </div>

            <div class="form-group">
              <label for="item-description">Descri√ß√£o</label>
              <textarea id="item-description" rows="3"></textarea>
            </div>

            <div class="form-group">
              <label for="item-image">Imagem</label>
              <input type="file" id="item-image" accept="image/*" />
              <div id="image-preview" class="image-preview"></div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-item">
            Cancelar
          </button>
          <button type="submit" form="item-form" class="btn btn-primary">
            Salvar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Sele√ß√£o de √çcone -->
    <div id="icon-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Escolher √çcone</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="icon-categories">
            <button class="icon-category-btn active" data-category="furniture">
              M√≥veis
            </button>
            <button class="icon-category-btn" data-category="appliances">
              Eletrodom√©sticos
            </button>
            <button class="icon-category-btn" data-category="kitchen">
              Cozinha
            </button>
            <button class="icon-category-btn" data-category="decoration">
              Decora√ß√£o
            </button>
            <button class="icon-category-btn" data-category="general">
              Geral
            </button>
          </div>
          <div id="icon-grid" class="icon-grid"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-icon">
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Carregamento de Projeto -->
    <div id="load-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Carregar Projeto</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="load-options">
            <div class="load-option">
              <h4>Carregar do Arquivo</h4>
              <input type="file" id="project-file" accept=".json" />
              <button id="load-file-btn" class="btn btn-primary">
                Carregar Arquivo
              </button>
            </div>
            <div class="load-option">
              <h4>Projetos Salvos</h4>
              <div id="saved-projects" class="saved-projects"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Input oculto para salvar projeto -->
    <input
      type="file"
      id="hidden-file-input"
      style="display: none"
      accept=".json"
    />

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
