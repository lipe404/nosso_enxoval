<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nosso Enxoval - Planejamento de Casamento</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='static/upload/images/icon/fav.png') }}"
    />
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1><i class="fas fa-heart"></i> Nosso Enxoval</h1>
          <div class="header-actions">
            <button id="new-project-btn" class="btn btn-primary">
              <i class="fas fa-plus"></i> Novo Projeto
            </button>
            <button id="save-project-btn" class="btn btn-success">
              <i class="fas fa-save"></i> Salvar
            </button>
            <button id="load-project-btn" class="btn btn-info">
              <i class="fas fa-folder-open"></i> Carregar
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
          <div class="sidebar-section">
            <h3><i class="fas fa-home"></i> C√¥modos</h3>
            <button id="add-room-btn" class="btn btn-outline">
              <i class="fas fa-plus"></i> Adicionar C√¥modo
            </button>
            <div id="rooms-list" class="rooms-list"></div>
          </div>

          <div class="sidebar-section">
            <h3><i class="fas fa-couch"></i> Itens</h3>
            <button id="add-item-btn" class="btn btn-outline">
              <i class="fas fa-plus"></i> Adicionar Item
            </button>
            <div class="filter-section">
              <select id="category-filter">
                <option value="">Todas as categorias</option>
                <option value="moveis">M√≥veis</option>
                <option value="eletrodomesticos">Eletrodom√©sticos</option>
                <option value="utensilios">Utens√≠lios</option>
                <option value="decoracao">Decora√ß√£o</option>
                <option value="outros">Outros</option>
              </select>
              <select id="room-filter">
                <option value="">Todos os c√¥modos</option>
              </select>
              <select id="priority-filter">
                <option value="">Todas as prioridades</option>
                <option value="basico">B√°sico</option>
                <option value="necessario">Necess√°rio</option>
                <option value="util">√ötil</option>
                <option value="luxo">Luxo</option>
              </select>
              <select id="status-filter">
                <option value="">Todos os status</option>
                <option value="comprado">Comprado</option>
                <option value="pendente">Pendente</option>
              </select>
            </div>
            <div id="items-list" class="items-list"></div>
          </div>
        </aside>

        <!-- Main View -->
        <section class="main-view">
          <div class="view-controls">
            <button id="floor-plan-view" class="btn btn-outline active">
              <i class="fas fa-map"></i> Planta Baixa
            </button>
            <button id="list-view" class="btn btn-outline">
              <i class="fas fa-list"></i> Lista
            </button>
            <button id="accounts-view" class="btn btn-outline">
              <i class="fas fa-calculator"></i> Contas
            </button>
          </div>

          <div id="floor-plan-container" class="floor-plan-container">
            <div id="floor-plan" class="floor-plan">
              <div class="empty-state">
                <i class="fas fa-home"></i>
                <h3>Comece criando um c√¥modo</h3>
                <p>Adicione c√¥modos para come√ßar a planejar seu enxoval</p>
              </div>
            </div>
          </div>

          <div id="list-container" class="list-container" style="display: none">
            <!-- Barra de Pesquisa e Filtros -->
            <div class="list-controls">
              <div class="search-section">
                <div class="search-input-wrapper">
                  <i class="fas fa-search search-icon"></i>
                  <input 
                    type="text" 
                    id="search-input" 
                    placeholder="Pesquisar itens..." 
                    class="search-input"
                  />
                  <button id="clear-search" class="clear-search" style="display: none;">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              
              <div class="list-filters">
                <select id="list-category-filter">
                  <option value="">Todas as categorias</option>
                  <option value="moveis">M√≥veis</option>
                  <option value="eletrodomesticos">Eletrodom√©sticos</option>
                  <option value="utensilios">Utens√≠lios</option>
                  <option value="decoracao">Decora√ß√£o</option>
                  <option value="outros">Outros</option>
                </select>
                
                <select id="list-room-filter">
                  <option value="">Todos os c√¥modos</option>
                </select>
                
                <select id="list-priority-filter">
                  <option value="">Todas as prioridades</option>
                  <option value="basico">üî¥ B√°sico</option>
                  <option value="necessario">üü° Necess√°rio</option>
                  <option value="util">üü¢ √ötil</option>
                  <option value="luxo">üîµ Luxo</option>
                </select>
                
                <select id="list-status-filter">
                  <option value="">Todos os status</option>
                  <option value="comprado">‚úÖ Comprado</option>
                  <option value="pendente">‚è≥ Pendente</option>
                </select>
                
                <select id="sort-filter">
                  <option value="name">Ordenar por Nome</option>
                  <option value="price-asc">Pre√ßo (Menor ‚Üí Maior)</option>
                  <option value="price-desc">Pre√ßo (Maior ‚Üí Menor)</option>
                  <option value="priority">Prioridade</option>
                  <option value="status">Status</option>
                  <option value="room">C√¥modo</option>
                </select>
              </div>
              
              <div class="list-stats">
                <span id="items-count">0 itens encontrados</span>
                <span id="items-total-value">Total: R$ 0,00</span>
              </div>
            </div>
            
            <div id="items-grid" class="items-grid"></div>
          </div>

          <div
            id="accounts-container"
            class="accounts-container"
            style="display: none"
          >
            <div class="accounts-summary">
              <h2>Resumo Financeiro</h2>
              <div class="summary-cards">
                <div class="summary-card total">
                  <h3>Total Geral</h3>
                  <div class="amount" id="total-amount">R$ 0,00</div>
                </div>
                <div class="summary-card purchased">
                  <h3>J√° Comprado</h3>
                  <div class="amount" id="purchased-amount">R$ 0,00</div>
                </div>
                <div class="summary-card pending">
                  <h3>Pendente</h3>
                  <div class="amount" id="pending-amount">R$ 0,00</div>
                </div>
              </div>
            </div>

            <div class="accounts-by-room">
              <h3>Por C√¥modo</h3>
              <div id="room-accounts" class="room-accounts"></div>
            </div>

            <div class="accounts-by-priority">
              <h3>Por Prioridade</h3>
              <div id="priority-accounts" class="priority-accounts"></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Modals -->
    <!-- Modal de C√¥modo -->
    <div id="room-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="room-modal-title">Adicionar C√¥modo</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <form id="room-form">
            <div class="form-group">
              <label for="room-name">Nome do C√¥modo</label>
              <input type="text" id="room-name" required />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="room-width">Largura (m)</label>
                <input
                  type="number"
                  id="room-width"
                  min="1"
                  max="20"
                  step="0.1"
                  required
                />
              </div>
              <div class="form-group">
                <label for="room-height">Altura (m)</label>
                <input
                  type="number"
                  id="room-height"
                  min="1"
                  max="20"
                  step="0.1"
                  required
                />
              </div>
            </div>
            <div class="form-group">
              <label for="room-color">Cor do C√¥modo</label>
              <input type="color" id="room-color" value="#e3f2fd" />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-room">
            Cancelar
          </button>
          <button type="submit" form="room-form" class="btn btn-primary">
            Salvar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Item -->
    <div id="item-modal" class="modal">
      <div class="modal-content modal-large modal-tabbed">
        <div class="modal-header">
          <h3 id="item-modal-title">Adicionar Item</h3>
          <button class="modal-close">&times;</button>
        </div>
        
        <!-- Navega√ß√£o por Abas -->
        <div class="modal-tabs">
          <button class="tab-btn active" data-tab="basic">
            <i class="fas fa-info-circle"></i>
            Informa√ß√µes B√°sicas
          </button>
          <button class="tab-btn" data-tab="details">
            <i class="fas fa-cog"></i>
            Detalhes
          </button>
          <button class="tab-btn" data-tab="purchase">
            <i class="fas fa-shopping-cart"></i>
            Compra
          </button>
          <button class="tab-btn" data-tab="media">
            <i class="fas fa-image"></i>
            M√≠dia
          </button>
        </div>

        <div class="modal-body modal-body-tabbed">
          <form id="item-form">
            <!-- Aba 1: Informa√ß√µes B√°sicas -->
            <div class="tab-content active" id="tab-basic">
              <div class="tab-section">
                <h4><i class="fas fa-tag"></i> Identifica√ß√£o</h4>
                <div class="form-group">
                  <label for="item-name">Nome do Item *</label>
                  <input type="text" id="item-name" required placeholder="Ex: Sof√° 3 lugares" />
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="item-category">Categoria *</label>
                    <select id="item-category" required>
                      <option value="">Selecione...</option>
                      <option value="moveis">ü™ë M√≥veis</option>
                      <option value="eletrodomesticos">‚ö° Eletrodom√©sticos</option>
                      <option value="utensilios">üç¥ Utens√≠lios</option>
                      <option value="decoracao">üé® Decora√ß√£o</option>
                      <option value="outros">üì¶ Outros</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="item-room">C√¥modo *</label>
                    <select id="item-room" required>
                      <option value="">Selecione...</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="tab-section">
                <h4><i class="fas fa-star"></i> Classifica√ß√£o</h4>
                <div class="form-row">
                  <div class="form-group">
                    <label for="item-priority">Prioridade *</label>
                    <select id="item-priority" required>
                      <option value="">Selecione...</option>
                      <option value="basico">üî¥ B√°sico - Essencial</option>
                      <option value="necessario">üü° Necess√°rio - Importante</option>
                      <option value="util">üü¢ √ötil - Conveniente</option>
                      <option value="luxo">üîµ Luxo - Opcional</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="item-status">Status *</label>
                    <select id="item-status" required>
                      <option value="pendente">‚è≥ Pendente</option>
                      <option value="comprado">‚úÖ Comprado</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Aba 2: Detalhes -->
            <div class="tab-content" id="tab-details">
              <div class="tab-section">
                <h4><i class="fas fa-ruler"></i> Dimens√µes</h4>
                <div class="form-row">
                  <div class="form-group">
                    <label for="item-width">Largura (cm)</label>
                    <input type="number" id="item-width" min="1" max="1000" placeholder="Ex: 200" />
                    <small class="form-help">Largura do item em cent√≠metros</small>
                  </div>
                  <div class="form-group">
                    <label for="item-height">Altura (cm)</label>
                    <input type="number" id="item-height" min="1" max="1000" placeholder="Ex: 80" />
                    <small class="form-help">Altura do item em cent√≠metros</small>
                  </div>
                </div>
              </div>

              <div class="tab-section">
                <h4><i class="fas fa-palette"></i> Apar√™ncia</h4>
                <div class="form-group">
                  <label for="item-icon">√çcone de Representa√ß√£o</label>
                  <div class="icon-selector">
                    <button type="button" id="selected-icon" class="icon-button">
                      <i class="fas fa-cube"></i>
                    </button>
                    <button type="button" id="choose-icon-btn" class="btn btn-outline">
                      <i class="fas fa-icons"></i> Escolher √çcone
                    </button>
                  </div>
                  <input type="hidden" id="item-icon" value="fas fa-cube" />
                  <small class="form-help">√çcone usado para representar o item na planta baixa</small>
                </div>

                <div class="form-group">
                  <label for="item-description">Descri√ß√£o</label>
                  <textarea id="item-description" rows="4" placeholder="Descreva caracter√≠sticas, cor, material, marca, etc."></textarea>
                  <small class="form-help">Informa√ß√µes adicionais sobre o item</small>
                </div>
              </div>
            </div>

            <!-- Aba 3: Compra -->
            <div class="tab-content" id="tab-purchase">
              <div class="tab-section">
                <h4><i class="fas fa-dollar-sign"></i> Pre√ßo</h4>
                <div class="form-group">
                  <label for="item-price">Pre√ßo (R$)</label>
                  <input type="number" id="item-price" min="0" step="0.01" placeholder="0,00" />
                  <small class="form-help">Valor estimado ou real do item</small>
                </div>
              </div>

              <div class="tab-section">
                <h4><i class="fas fa-link"></i> Links de Compra</h4>
                <div id="purchase-links" class="purchase-links">
                  <div class="link-group">
                    <div class="link-inputs">
                      <input type="url" placeholder="https://..." class="purchase-link-input" />
                      <input type="text" placeholder="Nome da loja (opcional)" class="store-name-input" />
                    </div>
                    <button type="button" class="btn btn-danger remove-link">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
                <button type="button" id="add-link-btn" class="btn btn-outline btn-add-link">
                  <i class="fas fa-plus"></i> Adicionar Link
                </button>
                <small class="form-help">Adicione links de diferentes lojas para comparar pre√ßos</small>
              </div>
            </div>

            <!-- Aba 4: M√≠dia -->
            <div class="tab-content" id="tab-media">
              <div class="tab-section">
                <h4><i class="fas fa-camera"></i> Imagem do Item</h4>
                <div class="form-group">
                  <label for="item-image">Carregar Imagem</label>
                  <div class="file-upload-area">
                    <input type="file" id="item-image" accept="image/*" />
                    <div class="file-upload-text">
                      <i class="fas fa-cloud-upload-alt"></i>
                      <p>Clique para selecionar uma imagem</p>
                      <small>PNG, JPG, GIF at√© 16MB</small>
                    </div>
                  </div>
                  <div id="image-preview" class="image-preview"></div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-item">
            <i class="fas fa-times"></i> Cancelar
          </button>
          <button type="submit" form="item-form" class="btn btn-primary">
            <i class="fas fa-save"></i> Salvar Item
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Sele√ß√£o de √çcone -->
    <div id="icon-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Escolher √çcone</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="icon-categories">
            <button class="icon-category-btn active" data-category="furniture">
              M√≥veis
            </button>
            <button class="icon-category-btn" data-category="appliances">
              Eletrodom√©sticos
            </button>
            <button class="icon-category-btn" data-category="kitchen">
              Cozinha
            </button>
            <button class="icon-category-btn" data-category="decoration">
              Decora√ß√£o
            </button>
            <button class="icon-category-btn" data-category="general">
              Geral
            </button>
          </div>
          <div id="icon-grid" class="icon-grid"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancel-icon">
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Carregamento de Projeto -->
    <div id="load-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Carregar Projeto</h3>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="load-options">
            <div class="load-option">
              <h4>Carregar do Arquivo</h4>
              <input type="file" id="project-file" accept=".json" />
              <button id="load-file-btn" class="btn btn-primary">
                Carregar Arquivo
              </button>
            </div>
            <div class="load-option">
              <h4>Projetos Salvos</h4>
              <div id="saved-projects" class="saved-projects"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Input oculto para salvar projeto -->
    <input
      type="file"
      id="hidden-file-input"
      style="display: none"
      accept=".json"
    />

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
